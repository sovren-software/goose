# Augmentum OS — Goose hook configuration
#
# Install: copy to ~/.config/goose/hooks.yaml
# Or symlink: ln -sf ~/cDesign/goose/contrib/config/hooks.yaml ~/.config/goose/hooks.yaml

hooks:
  session_start:
    # Node context: identity, compliance tier, gateway models, git branch
    - command: "~/.config/goose/hooks/augmentum-session-start.sh"
      timeout: 10

  prompt_submit:
    # CQI v1 bridge — cognitive layer injection (memory, vault, rules)
    # Calls ~/.dotfiles/.claude/hooks/{memory-inject,vault-inject,rule-apply}.py
    # Gracefully degrades when embed-server is absent or tools are missing
    - command: "~/.config/goose/hooks/augmentum-context-inject.sh"
      timeout: 10

  pre_tool_use:
    # Permit enforcement — blocks tool calls outside active session scopes
    # Reads /run/augmentum/permits.json; fail-open when file absent
    - command: "~/.config/goose/hooks/augmentum-permit-check.sh"
      timeout: 5

    # Audit shell commands — log to ~/.local/share/goose/tool-audit.jsonl
    - command: "~/.config/goose/hooks/augmentum-pre-tool-use.sh"
      timeout: 5
      tool_name: "developer__shell"

  session_stop:
    - command: "~/.config/goose/hooks/augmentum-session-stop.sh"
      timeout: 10
