"use strict";(globalThis.webpackChunkgoose=globalThis.webpackChunkgoose||[]).push([[9728],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(96540);const o={},r=i.createContext(o);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},74964:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/sandbox","title":"macOS Sandbox for goose Desktop","description":"Optional sandboxing for goose Desktop to control file access, filter network traffic, and enforce security policies on macOS","source":"@site/docs/guides/sandbox.md","sourceDirName":"guides","slug":"/guides/sandbox","permalink":"/goose/pr-preview/pr-7384/docs/guides/sandbox","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"macOS Sandbox for goose Desktop","sidebar_label":"Sandbox for goose Desktop","description":"Optional sandboxing for goose Desktop to control file access, filter network traffic, and enforce security policies on macOS"},"sidebar":"tutorialSidebar","previous":{"title":"Codebase Analysis","permalink":"/goose/pr-preview/pr-7384/docs/guides/codebase-analysis"},"next":{"title":"Terminal Integration","permalink":"/goose/pr-preview/pr-7384/docs/guides/terminal-integration"}}');var o=s(74848),r=s(28453);const l={title:"macOS Sandbox for goose Desktop",sidebar_label:"Sandbox for goose Desktop",description:"Optional sandboxing for goose Desktop to control file access, filter network traffic, and enforce security policies on macOS"},t=void 0,c={},d=[{value:"Quick Start",id:"quick-start",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Core",id:"core",level:3},{value:"File System",id:"file-system",level:3},{value:"Environment Variables",id:"environment-variables",level:4},{value:"Direct Network Access",id:"direct-network-access",level:3},{value:"Process Restrictions",id:"process-restrictions",level:3},{value:"Environment Variables",id:"environment-variables-1",level:4},{value:"Network Filtering",id:"network-filtering",level:3},{value:"Environment Variables",id:"environment-variables-2",level:4},{value:"Managing the Domain Blocklist",id:"managing-the-domain-blocklist",level:4},{value:"Using Git Over SSH",id:"using-git-over-ssh",level:4},{value:"LaunchDarkly (Optional)",id:"launchdarkly-optional",level:3},{value:"Environment Variables",id:"environment-variables-3",level:4},{value:"Example Configurations",id:"example-configurations",level:2},{value:"Maximum security",id:"maximum-security",level:3},{value:"Allow raw IP connections (e.g. for internal APIs)",id:"allow-raw-ip-connections-eg-for-internal-apis",level:3},{value:"Disable SSH entirely",id:"disable-ssh-entirely",level:3},{value:"Relaxed mode (fewer restrictions)",id:"relaxed-mode-fewer-restrictions",level:3},{value:"With LaunchDarkly egress control",id:"with-launchdarkly-egress-control",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"goose Desktop includes an optional macOS sandbox that you can enable when you need stricter control and visibility over what goose can access on your system. Use it to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Restrict file system access"})," \u2014 Block writes to SSH keys, shell configs, and goose configuration files"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Control network connections"})," \u2014 Force all traffic through a filtering proxy that blocks unapproved domains"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Prevent security bypasses"})," \u2014 Block tunneling tools, raw sockets, and other techniques that could circumvent restrictions"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Audit and enforce policies"})," \u2014 Log all network activity and enforce compliance requirements"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"goose runs with full tool access, but the sandbox uses two layers of protection:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File access control"})," - Apple's ",(0,o.jsx)(n.code,{children:"sandbox-exec"})," restricts file and network access at the system level"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Outbound connections"})," - A local egress proxy filters and logs outgoing connections"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{title:"macOS Requirement",type:"info",children:(0,o.jsxs)(n.p,{children:["The sandbox relies on ",(0,o.jsx)(n.code,{children:"/usr/bin/sandbox-exec"}),", which is only available on macOS and is also known as Apple's seatbelt technology."]})}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.p,{children:"To enable the sandbox, launch goose Desktop from the terminal with the environment variable set. For example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_SANDBOX=true\nopen -a Goose\n"})}),"\n",(0,o.jsx)(n.p,{children:"When the app starts with sandboxing enabled, it will:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Generate a seatbelt sandbox profile"}),"\n",(0,o.jsx)(n.li,{children:"Start a local HTTP CONNECT proxy on localhost"}),"\n",(0,o.jsxs)(n.li,{children:["Launch the ",(0,o.jsx)(n.code,{children:"goosed"})," backend for goose Desktop inside ",(0,o.jsx)(n.code,{children:"sandbox-exec"}),", forcing all traffic through the proxy"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The sandbox remains active until you quit goose Desktop. To disable it, quit the app and relaunch normally (or set ",(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX=false"})," when opening from the terminal)."]}),"\n",(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsx)(n.p,{children:"All configuration is via environment variables. Defaults are designed to be secure out of the box, but you can adjust them to match your security requirements."}),"\n",(0,o.jsx)(n.h3,{id:"core",children:"Core"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Variable"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"true"})," or ",(0,o.jsx)(n.code,{children:"1"})," to enable the sandbox. See ",(0,o.jsx)(n.a,{href:"#quick-start",children:"Quick Start"})," for launch instructions."]})]})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"file-system",children:"File System"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"https://github.com/block/goose/blob/main/ui/desktop/src/sandbox/index.ts",children:"seatbelt sandbox profile"})," blocks write operations to these sensitive files:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"~/.ssh/"})," - Prevent SSH key tampering"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"~/.bashrc"}),", ",(0,o.jsx)(n.code,{children:"~/.zshrc"}),", ",(0,o.jsx)(n.code,{children:"~/.bash_profile"}),", ",(0,o.jsx)(n.code,{children:"~/.zprofile"})," - Prevent shell config injection"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"~/.config/goose/sandbox/"})," - Protect sandbox config from the sandboxed process"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"~/.config/goose/config.yaml"})," - Protect goose config"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Variable"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_PROTECT_FILES"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsxs)(n.td,{children:["Write-protect sensitive files listed above. Set to ",(0,o.jsx)(n.code,{children:"false"})," to disable"]})]})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"direct-network-access",children:"Direct Network Access"}),"\n",(0,o.jsx)(n.p,{children:"The seatbelt sandbox denies all direct network access, forcing traffic through the proxy. The only allowed connections are:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Localhost"})," \u2014 Allows the ",(0,o.jsx)(n.code,{children:"goosed"})," process to reach the egress proxy and its own server port"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Unix sockets"})," \u2014 For local inter-process communication (IPC)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"mDNSResponder"})," \u2014 For DNS resolution"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{title:"Not Configurable",type:"info",children:(0,o.jsx)(n.p,{children:"These restrictions are always active when the sandbox is enabled."})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"process-restrictions",children:"Process Restrictions"}),"\n",(0,o.jsx)(n.p,{children:"The seatbelt sandbox blocks tools and system calls that could bypass security controls:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tunneling tools"})," \u2014 ",(0,o.jsx)(n.code,{children:"nc"}),", ",(0,o.jsx)(n.code,{children:"ncat"}),", ",(0,o.jsx)(n.code,{children:"netcat"}),", ",(0,o.jsx)(n.code,{children:"socat"}),", ",(0,o.jsx)(n.code,{children:"telnet"})," are blocked to prevent bypassing the proxy"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Raw sockets"})," \u2014 ",(0,o.jsx)(n.code,{children:"SOCK_RAW"})," on ",(0,o.jsx)(n.code,{children:"AF_INET"}),"/",(0,o.jsx)(n.code,{children:"AF_INET6"})," is blocked to prevent raw packet crafting"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Kernel extensions"})," \u2014 ",(0,o.jsx)(n.code,{children:"system-kext-load"})," is denied"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"environment-variables-1",children:"Environment Variables"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Variable"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_BLOCK_RAW_SOCKETS"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsxs)(n.td,{children:["Block ",(0,o.jsx)(n.code,{children:"SOCK_RAW"}),". Set to ",(0,o.jsx)(n.code,{children:"false"})," to disable"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_BLOCK_TUNNELING"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsxs)(n.td,{children:["Block ",(0,o.jsx)(n.code,{children:"nc"}),"/",(0,o.jsx)(n.code,{children:"netcat"}),"/",(0,o.jsx)(n.code,{children:"socat"}),"/",(0,o.jsx)(n.code,{children:"telnet"}),". Set to ",(0,o.jsx)(n.code,{children:"false"})," to disable"]})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"network-filtering",children:"Network Filtering"}),"\n",(0,o.jsx)(n.p,{children:"The egress proxy inspects and filters all outgoing connections. You can customize filtering rules through the blocklist file and configuration variables."}),"\n",(0,o.jsx)(n.p,{children:"The egress proxy checks connections in this order:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Loopback detection"})," \u2014 Prevents using the proxy as a relay back to localhost"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Raw IP blocking"})," \u2014 Connections to bare IP addresses (no domain) are blocked"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Domain blocklist"})," \u2014 Domains listed in ",(0,o.jsx)(n.code,{children:"blocked.txt"})," are denied (including all subdomains)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"SSH/Git host restrictions"})," \u2014 SSH ports (22, 2222, 7999) are restricted to known git hosts"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For optional LaunchDarkly-based egress control, see ",(0,o.jsx)(n.a,{href:"#launchdarkly-optional",children:"LaunchDarkly"}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"environment-variables-2",children:"Environment Variables"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Variable"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_ALLOW_IP"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"true"})," to allow connections to raw IP addresses"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_BLOCK_LOOPBACK"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"true"})," to block loopback relay through the proxy"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_ALLOW_SSH"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"false"})," to block all SSH traffic"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_GIT_HOSTS"})}),(0,o.jsx)(n.td,{children:"built-in list"}),(0,o.jsxs)(n.td,{children:["Comma-separated list of allowed SSH git hosts (e.g. ",(0,o.jsx)(n.code,{children:"github.com,gitlab.com"}),")"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_SSH_ALL_HOSTS"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"true"})," to allow SSH to any host (not just git hosts)"]})]})]})]}),"\n",(0,o.jsx)(n.h4,{id:"managing-the-domain-blocklist",children:"Managing the Domain Blocklist"}),"\n",(0,o.jsxs)(n.p,{children:["The file ",(0,o.jsx)(n.code,{children:"~/.config/goose/sandbox/blocked.txt"})," controls which domains are blocked by the proxy. It's created automatically on first run from a bundled template."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"# One domain per line. Subdomains are blocked automatically.\n# Lines starting with # are comments.\nevil.com          # blocks evil.com and *.evil.com\npastebin.com\ntransfer.sh\nwebhook.site\n"})}),"\n",(0,o.jsx)(n.admonition,{title:"Live Reload",type:"tip",children:(0,o.jsxs)(n.p,{children:["Changes to ",(0,o.jsx)(n.code,{children:"blocked.txt"})," take effect immediately \u2014 the proxy watches the file with ",(0,o.jsx)(n.code,{children:"fs.watch"})," and reloads it automatically. No restart needed."]})}),"\n",(0,o.jsx)(n.h4,{id:"using-git-over-ssh",children:"Using Git Over SSH"}),"\n",(0,o.jsxs)(n.p,{children:["SSH git operations (e.g. ",(0,o.jsx)(n.code,{children:"git clone git@github.com:..."}),") work through the sandbox via a bundled ",(0,o.jsx)(n.code,{children:"connect-proxy.pl"})," script that acts as an SSH ",(0,o.jsx)(n.code,{children:"ProxyCommand"}),". This routes SSH connections through the egress proxy, which then applies the same allowlist rules."]}),"\n",(0,o.jsx)(n.p,{children:"By default, SSH is only allowed to well-known git hosting domains (e.g. GitHub, GitLab, Bitbucket). To customize:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Add custom git hosts\nexport GOOSE_SANDBOX_GIT_HOSTS="github.com,gitlab.com,your-gitea.internal.com"\n\n# Or allow SSH to all hosts\nexport GOOSE_SANDBOX_SSH_ALL_HOSTS=true\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"launchdarkly-optional",children:"LaunchDarkly (Optional)"}),"\n",(0,o.jsxs)(n.p,{children:["For enterprise environments, LaunchDarkly provides optional dynamic egress control. If not configured, the sandbox uses the local ",(0,o.jsx)(n.code,{children:"blocked.txt"})," blocklist."]}),"\n",(0,o.jsx)(n.h4,{id:"environment-variables-3",children:"Environment Variables"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Variable"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"LAUNCHDARKLY_CLIENT_ID"})}),(0,o.jsx)(n.td,{children:"\u2014"}),(0,o.jsx)(n.td,{children:"LD client SDK key to enable dynamic egress control"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_LD_FAILOVER"})}),(0,o.jsx)(n.td,{children:"\u2014"}),(0,o.jsxs)(n.td,{children:["Failover mode if LD is unreachable: ",(0,o.jsx)(n.code,{children:"allow"}),", ",(0,o.jsx)(n.code,{children:"deny"}),", or ",(0,o.jsx)(n.code,{children:"blocklist"})]})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"example-configurations",children:"Example Configurations"}),"\n",(0,o.jsx)(n.h3,{id:"maximum-security",children:"Maximum security"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_SANDBOX=true\n# All protections enabled (defaults)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"allow-raw-ip-connections-eg-for-internal-apis",children:"Allow raw IP connections (e.g. for internal APIs)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_SANDBOX=true\nexport GOOSE_SANDBOX_ALLOW_IP=true\n"})}),"\n",(0,o.jsx)(n.h3,{id:"disable-ssh-entirely",children:"Disable SSH entirely"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_SANDBOX=true\nexport GOOSE_SANDBOX_ALLOW_SSH=false\n"})}),"\n",(0,o.jsx)(n.h3,{id:"relaxed-mode-fewer-restrictions",children:"Relaxed mode (fewer restrictions)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_SANDBOX=true\nexport GOOSE_SANDBOX_PROTECT_FILES=false\nexport GOOSE_SANDBOX_BLOCK_RAW_SOCKETS=false\nexport GOOSE_SANDBOX_BLOCK_TUNNELING=false\nexport GOOSE_SANDBOX_ALLOW_IP=true\nexport GOOSE_SANDBOX_SSH_ALL_HOSTS=true\n"})}),"\n",(0,o.jsx)(n.h3,{id:"with-launchdarkly-egress-control",children:"With LaunchDarkly egress control"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_SANDBOX=true\nexport LAUNCHDARKLY_CLIENT_ID=sdk-your-key-here\nexport GOOSE_SANDBOX_LD_FAILOVER=blocklist  # fall back to local blocklist if LD is down\n"})}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:'Error: "GOOSE_SANDBOX=true but sandbox-exec is not available (macOS only)"'}),(0,o.jsx)(n.br,{}),"\n","You're not on macOS, or ",(0,o.jsx)(n.code,{children:"/usr/bin/sandbox-exec"})," is missing. The sandbox only works on macOS."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Extensions or tools can't reach the network"}),(0,o.jsx)(n.br,{}),"\n","Check if the destination domain is in ",(0,o.jsx)(n.code,{children:"~/.config/goose/sandbox/blocked.txt"}),", or if you need to enable ",(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_ALLOW_IP=true"})," for IP-based endpoints."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"git clone over SSH fails"}),(0,o.jsx)(n.br,{}),"\n","The target host may not be in the default Git hosts allowlist. Add it with ",(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_GIT_HOSTS=your-host.com"})," or set ",(0,o.jsx)(n.code,{children:"GOOSE_SANDBOX_SSH_ALL_HOSTS=true"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Want to inspect what the proxy is blocking?"}),(0,o.jsx)(n.br,{}),"\n","Check the ",(0,o.jsx)(n.a,{href:"/docs/guides/logs#desktop-application-log",children:"Desktop application logs"}),". Blocked connections are logged with the prefix ",(0,o.jsx)(n.code,{children:"[sandbox-proxy]"})," and include the reason for blocking."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}}}]);